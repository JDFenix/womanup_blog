@page "/services"
@using womanup_blog.Models;
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager
@using Microsoft.Maui.ApplicationModel.Communication

<div class="container services-container">
	<div class="row text-center">
		<!-- Main Banner -->
		<div class="card-image-container mb-4 position-relative">
			<img src="/images/services/main.png" alt="WomanUp Services" class="card-image w-100 rounded-4">
			<div class="card-overlay-main rounded-4">
				<span class="card-title fw-bold">
					"Soluciones creadas por y para mujeres
					<br />
					con confianza y seguridad."
				</span>
			</div>
		</div>

		<!-- Filter Tabs -->
		<div class="mb-4 px-2">
			<div class="row g-2">
				<div class="col-6">
					<button class="btn w-100 rounded-pill fw-bold active-tab" type="button">
						Todos
					</button>
				</div>
				<div class="col-6">
					<button class="btn w-100 rounded-pill fw-bold" type="button">
						Destacados
					</button>
				</div>
			</div>
		</div>

		<!-- Service Cards - First Column -->
		<div class="col-6 service-column">
			@foreach (var service in ServicesLeft)
			{
				<button @onclick="() => NavigateToService(service.Route)" class="service-card-btn w-100 p-0 border-0 bg-transparent">
					<div class="service-card shadow-sm">
						<div class="card-image-container">
							<img src="@service.ImageUrl" alt="@service.Title" class="card-image">
							<div class="card-overlay rounded-4">
								<p class="card-title">@service.Title</p>
							</div>
						</div>
					</div>
				</button>
			}
		</div>

		<!-- Service Cards - Second Column -->
		<div class="col-6 service-column">
			@foreach (var service in ServicesRight)
			{
				<button @onclick="() => NavigateToService(service.Route)" class="service-card-btn w-100 p-0 border-0 bg-transparent">
					<div class="service-card shadow-sm">
						<div class="card-image-container">
							<img src="@service.ImageUrl" alt="@service.Title" class="card-image">
							<div class="card-overlay rounded-4">
								<p class="card-title">@service.Title</p>
							</div>
						</div>
					</div>
				</button>
			}
		</div>

		<!-- Help Card -->
		<div class="card mt-3 mb-3 rounded-4 text-light shadow-sm" style="background-color:#6D28D9">
			<div class="card-body">
				<div class="text-start">
					<div class="row align-items-center">
						<div class="col-2">
							<i class="bi bi-exclamation-circle fs-4"></i>
						</div>
						<div class="col-10">
							<h5 class="fw-bold mb-1">¿Necesitas ayuda?</h5>
							<span class="opacity-75">
								Disponible 24/7 para emergencias
							</span>
						</div>
						<div class="col-12 mt-2">
							<button class="btn btn-light w-100 rounded-pill fw-bold" @onclick="MakeCall" type="button">
								<i class="bi bi-telephone-fill me-2"></i>Llamar
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	/* Services page styling */
	.services-container {
		padding-left: 0;
		padding-right: 0;
		max-width: 100%;
	}

	.service-column {
		padding-left: 5px;
		padding-right: 5px;
	}

	.service-card {
		position: relative;
		margin-bottom: 10px;
		border-radius: 12px;
		overflow: hidden;
		height: 150px;
		transition: transform 0.3s, box-shadow 0.3s;
	}

	.service-card-btn:active .service-card {
		transform: scale(0.98);
	}

	.card-image-container {
		position: relative;
		width: 100%;
		height: 100%;
	}

	.card-image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		border-radius: 12px;
	}

	.card-overlay {
		position: absolute;
		bottom: 0;
		left: 0;
		width: 100%;
		background-color: rgba(247, 176, 134, 0.7);
		padding: 10px;
		color: white;
		border-bottom-left-radius: 12px;
		border-bottom-right-radius: 12px;
	}

	.card-overlay-main {
		position: absolute;
		bottom: 0;
		left: 0;
		width: 100%;
		background-color: rgba(247, 176, 134, 0.7);
		padding: 10px;
		color: white;
		border-bottom-left-radius: 12px;
		border-bottom-right-radius: 12px;
	}

	.card-title {
		margin: 0;
		font-weight: bold;
		font-size: 1rem;
		color: #CA20DA;
		text-align: center;
	}

	/* Tab styling */
	.btn.rounded-pill {
		background-color: #E9D5FF;
		color: #9F09B1;
		transition: all 0.3s;
		border: none;
	}

		.btn.rounded-pill:hover, .btn.rounded-pill.active-tab {
			background-color: #9F09B1;
			color: white;
		}

	/* Responsive adjustments */
	@@media (min-width: 768px) {
		.service-card {
			height: 180px;
		}

		.card-title {
			font-size: 1.2rem;
		}
	}
</style>

@code {

	void MakeCall()
	{
		try
		{
			PhoneDialer.Open("1234567890");
		}
		catch (Exception ex)
		{
			Console.WriteLine("Error al intentar abrir la app de teléfono: " + ex.Message);
		}
	}


	private List<ServiceModel> ServicesLeft = new List<ServiceModel>
	{
		new ServiceModel {
			Title = "Asistencia Médica",
			ImageUrl = "/images/services/health.png",
			Route = "/services/medical"
		},
		new ServiceModel {
			Title = "Viaje Seguro",
			ImageUrl = "/images/services/travel-safe.png",
			Route = "/services/travel"
		},
		new ServiceModel {
			Title = "Asesoría Contable",
			ImageUrl = "/images/services/accounting.png",
			Route = "/services/accounting"
		},
		new ServiceModel {
			Title = "Reparaciones e Instalaciones",
			ImageUrl = "/images/services/fix.png",
			Route = "/services/repairs"
		}
	};

	private List<ServiceModel> ServicesRight = new List<ServiceModel>
	{
		new ServiceModel {
			Title = "Botón de Emergencia",
			ImageUrl = "/images/services/emergency.png",
			Route = "/services/emergency"
		},
		new ServiceModel {
			Title = "Asesoría Jurídica",
			ImageUrl = "/images/services/legal.png",
			Route = "/services/legal"
		},
		new ServiceModel {
			Title = "Apoyo Psicológico",
			ImageUrl = "/images/services/physicology.png",
			Route = "/services/psychology"
		},
		new ServiceModel {
			Title = "Mecanicas Certificadas",
			ImageUrl = "/images/services/mechanic.png",
			Route = "/services/mechanic"
		}
	};

	private void NavigateToService(string route)
	{
		NavigationManager.NavigateTo(route);
	}


}
